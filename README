                          WFReport QA method
                          ==================

Author: Aaron
Date: 2013-01-27 22:15:09 CST


Table of Contents
=================
1 报告检测分四部分
    1.1 报告自身检测
    1.2 报告和上个月的对比
    1.3 同类报告之间的对比
    1.4 肉眼检查PDF格式的报告
2 WFPrepaymentFix 报告的检查
3 WFServicerFix 报告的检查
4 WFPrepaymentArm 报告的检查
5 WFServicerArm 报告的检查
6 WFSpecpool 报告的检查
7 WFServicerSpecpool 报告的检查


1 报告检测分四部分 
===================

1.1 报告自身检测 
-----------------
1. 每个报告header中CPR的开始月份应该和报告所属月份相匹配, 报告的最左上角给出的年份和月份应该和当前年份和月份相匹配
   + 假若generate report 的时间为January 2013那么左上角的时间就应该为January 2013
   + CPR的开始月份为Dec (因为生成的是12月份的报告)
2. 每个报告的balance不能为空或者*, cpr1, cpr3, cpr6 cpr12 的范围为[0, 100] , wac <10 


假设要检测的报告为:ReportName, 并且生成的是12月份的报告，操作步骤为如下: 
a. _cd WFReportQA_
b. 将ReportName报告连同txt文件解压到WFReportQA/ReportName/目录下
c. 执行命令: _./CheckSelf.sh ReportName dec_
如果出现ReportName/fh20.txt: CPR ERROR(5#122):===>格式的行, 则说明报告中该行有问题， ReportName/fh20.txt 说明ReportName/fh20报告有问题，CPR是错误类型, 5 是出现错误的数据所在的colum number, 122出错的数据

1.2 报告和上个月的对比 
-----------------------
1. 当月报告总行数不能少于上个月
2. 和上个月相同报告相比相同CPN Year的balance是否相等， 若相等则出错

假设要检测的报告为ReportName，操作步骤为:
a. _cd WFReportQA_
b. 将上个月的ReportName 连同txt文件解压到WFReportQA/LastMonth/ReportName/ 目录下
b. _./CheckOther.sh ReportName dec_
    若出现"current month total line should not little than last month" 说明，当前月份报告总行数少于上个月，说明该报告可能有些问，需要确认下
    若出现ERROR: balance should not be equal ==>WFPrepaymentFix/fh10.txt ALL ALL 11 说明报告中该行和上个月相比balance相等，报告有问题

1.3 同类报告之间的对比 
-----------------------
1. 同类报告中相同的行的每列的值应该完全相等(Risk Multiples%部分除外)

  假设要检测的报告为ReportName(它和ReportName2属于同类报告), 操作步骤为:
   a. _cd WFReportQA_
   b. _./CheckLike.sh ReportName ReportName2 dec_
   若出现ReportName/fh10.txt have different with ReportName2/fh10.txt (vimdiff /tmp/fh10.txt.p.diff /tmp/fh10.txt.s.diff)字样，说明ReportName/fh10的报告和ReportName2/fh10的报告相比对应行不一样,直接执行命令：vimdiff /tmp/fh10.txt.p.diff /tmp/fh10.txt.s.diff, 就会看到有哪些不同. (其他agency报告也一样, vimdiff中的2个文件的最后一行会给出出错的txt文件和layout，对应的可以找到哪两个报告之间不一样)
   vimdiff中
   
   若出现It's OK between ReportName/fh10.txt and ReportName2/fh10.txt，说明ReportName/fh10 ReportName2/fh10相比没有问题

1.4 肉眼检查PDF格式的报告 
--------------------------
1. 检查报告数据是否有大量出现相同的地方: 横向看，纵向看
2. 所有报告中All 的部分应该出现在每一年的第一行
3. 报告中All部分的Risk Multiples%部分 3列值都要为100 (这个地方出错的可能行不大)
4. 检查PDF格式是否有错误的地方，给出以下几条供参考
   + 报告header部分有无错误
     + field的顺序是否正确
     + CPR 起始月份应该为报告所说的月份
     + 格式有无错误
   + 精度要统一:  CPN %.1f; balance %.0f; pct %.0f， 值后要有%; CPR %.1f; WAC %.2f， 值后要有%; WALA %.0f; AOLS %.0f; CLTV %.0f;FICO %.0f; TPO %.0f 值后要有%; Refi %.0f 值后要有%；
   + PDF每行行距是否过疏或过密
   + 报告左上角标题部分,比如:GNMA II Prepayment ARM Report, 是否跟报告内容是一致的
   + 当前月CPR 字体是否加粗


2 WFPrepaymentFix 报告的检查 
=============================
+ 报告自身检查
+ 和上个月相同报告的对比
+ 同类报告之间的对比(和FServicerFix对比)


3 WFServicerFix 报告的检查 
===========================
+ 报告自身检查
+ 和上个月相同报告的对比
+ 同类报告之间的对比(和WFPrepaymentFix对比)

+ 其他检查
        - g215 & g230 报告中不能有名为Multiple的servicer

4 WFPrepaymentArm 报告的检查 
=============================
+ 报告自身检查
+ 和上个月相同报告的对比
+ 同类报告之间的对比(和WFServicerArm对比)

+ 其他检查
    - 4th 时fn报告中最后一页底角要有"O vs. post-IO is preliminary until the IO breakout is received" 字样
    - 8th 时fn报告中最后一页底角要无"O vs. post-IO is preliminary until the IO breakout is received" 字样

5 WFServicerArm 报告的检查 
===========================
+ 报告自身的检查
+ 和上个月相同报告的对比
+ 同类报告之间的对比(和WFPrepaymentArm对比)

6 WFSpecpool 报告的检查 
========================
+ 报告自身的检查
+ 和上个月相同报告的对比
+ 同类报告之间的对比(和WFServicerSpecpool & WFPrepaymentFix对比)

+ 其他检查
    - 30yr, only show following vintage in following coupon:
          3.0     2012
        3.5     2012,2011,2010 
          4.0     2012,2011,2010,2009
          4.5     2012,2011,2010,2009
      5.0     2011,2010,2009,2008
      5.5     2009,2008,2007,2006,2005
          6.0     2009,2008,2007,2006,2005
      
+ abc
     - LB结尾的balance 不变
       U6 U9 CV CW 不变
     ck cj t4 t6? 
     行数不变， 加1 的列  4号 和6号 都会变
   
       

7 WFServicerSpecpool 报告的检查 
================================
+ 报告自身的检查
+ 和上个月相同报告的对比
+ 同类报告之间的对比(和WFSpecpool对比)

+ 其他检查
    - 每一年都至少要有一个servicer
